# 校赛A题数据处理算法汇报（发电量&环境检测量）

2025/08/04

## 发电数据处理

1. 原始数据集缺失值处理（空、N/A、inf）

- 重复数据直接去除，保留第一个

- 值为空或异常的数据用简单线性差值，根据相邻数据值推算补充

2. 异常值检测

- 负增量（累计不应下降） → 直接剔除
  
- 极端正增量（可能是仪表跳变或数据错误）：IQR 判别

3. 夜间‑白天划分（划分白天/夜间时段数据，处理有效数据部分）
   
   只使用白天数据拟合函数模型，夜间数据增量默认为0

4. 构建连续单值函数模型（样条）

- 时间转为 Unix 时间戳（一个数值，随时间推移单调递增；便于在数学上表示和处理）

- 使用一维插值 UnivariateSpline 拟合函数模型（白天时段）
  
- 对于夜间时段，发电量增量为0（不变了），将白天和夜间时段汇合得到总体的函数模型

5. 按整小时生成预测数据集

- 计算开始和结束的整小时。开始向前推、结束向后推到整小时时刻，中间分出整小时时刻点。

- 对每个时刻点通过函数模型取得估计函数值，汇总得到整小时预测数据集。

6. 根据预测数据集评估模型

  对比预测数据集与原数据集，在统计学上得到指标【MAE、RMSE、R²】，以此评价模型的好坏

7. 计算残差：预测数据 - 原始数据，根据差异也能评估模型的好坏

8. 输出预测数据和残差数据

## 环境检测仪数据处理

1. 原始数据集缺失值处理（空、N/A、inf）

- 重复数据直接去除，保留第一个

- 值为空或异常的数据用简单线性差值，根据相邻数据值推算补充

2. 数据集清洗

- 方法1：隔离森林：明显孤立的样本点为异常点

  [隔离森林/孤立森林](https://blog.csdn.net/qq_34160248/article/details/124538485)

- 方法2：时间序列分解异常检测

  算法：[时序数据STL（Seasonal-Trend decomposition using LOESS）分解](https://zhuanlan.zhihu.com/p/610001591)

- 方法3：根据数据特征去除不满足要求的点

  数据特征：夜间时段值为0或者无限接近0。所以夜间时段明显过大的值为异常。

- 综合上述3种方法，标出异常值位置

- 对位置上的值使用时间序列插值（邻近时间的样本点简单线性插值）进行替换
  
- 确保满足方法3要求：夜间时段值为0或者无限接近0。对夜间时段值进行限制，截断到[0, 5]区间内

3. 构建函数模型：日夜分离模型

- 提取时间特征，根据时间特征取得安全值（限制每种数据在应有的范围内，如一天只有24小时，一年只有365天，不考虑闰年）

- 根据时间特征建立辐照强度函数模型

  a. 分为【日变化模型】和【季节变化模型】两个子模型

  b. 使用sigmoid函数混合上述两种模型（确保函数值为正）

  c. 修正函数模型，应用【日出 <-> 日落】平滑过渡

  - 日出：6:00~8:00；白天：8:00~18:00；日落：18:00~20:00
    
  - 最大值限制（1000 w/m²）

- 根据气象学领域知识，确定模型初始参数，并拟合原始数据集的安全值（上面已经求出），得到函数模型

- 根据拟合得到的函数模型对比原始数据集，简要评估拟合效果

4. 生成整小时预测数据集

- 计算开始和结束的整小时。开始向前推、结束向后推到整小时时刻，中间分出整小时时刻点。

- 对每个时刻点通过函数模型取得估计函数值，汇总得到整小时预测数据集。

5. 结果可视化与验证

- 将【原始数据清洗前后对比】、【原始数据与预测数据对比】、【日周期特征中位数对比】图可视化展现

- 输出预测数据集

- 对比预测数据集与原数据集，在统计学上得到指标【MAE、RMSE、R²】，以此评价模型的好坏
